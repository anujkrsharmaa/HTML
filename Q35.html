<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>WhatsApp Web Clone</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            background: #111b21;
            font-family: 'Roboto', Arial, sans-serif;
            height: 100vh;
            overflow: hidden;
        }
        .wa-container {
            width: 100vw;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: #111b21;
        }
        .wa-main {
            width: 390px;
            height: 650px;
            background: #222e35;
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.45);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            border: 1px solid #222e35;
        }
        .wa-header {
            background: #202c33;
            color: #fff;
            display: flex;
            align-items: center;
            padding: 12px 16px;
            gap: 12px;
            border-bottom: 1px solid #222e35;
        }
        .wa-profile-pic {
            width: 42px;
            height: 42px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid #25d366;
        }
        .wa-profile-info {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            min-width: 0;
        }
        .wa-profile-info strong {
            font-size: 1.08em;
            font-weight: 500;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .wa-profile-info span {
            font-size: 0.92em;
            color: #8696a0;
        }
        .wa-header__menu {
            background: none;
            border: none;
            cursor: pointer;
            padding: 6px;
            border-radius: 50%;
            transition: background 0.2s;
            margin-left: 4px;
        }
        .wa-header__menu:hover {
            background: rgba(255,255,255,0.08);
        }
        .wa-chat-switcher {
            display: flex;
            gap: 8px;
            padding: 0 16px;
            background: #202c33;
            border-bottom: 1px solid #222e35;
        }
        .wa-chat-switcher button {
            flex: 1;
            padding: 10px 0 8px 0;
            border: none;
            background: #222e35;
            color: #8696a0;
            font-weight: 500;
            border-radius: 0 0 8px 8px;
            cursor: pointer;
            transition: background 0.2s, color 0.2s;
            font-size: 1em;
        }
        .wa-chat-switcher button.active {
            background: #111b21;
            color: #25d366;
        }
        .wa-chat-box {
            flex: 1;
            overflow-y: auto;
            padding: 18px 10px 8px 10px;
            display: flex;
            flex-direction: column;
            gap: 12px;
            background: #111b21;
        }
        .wa-message {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            max-width: 75%;
        }
        .wa-message.sent {
            align-self: flex-end;
            align-items: flex-end;
        }
        .wa-bubble {
            padding: 10px 16px;
            border-radius: 8px;
            background: #202c33;
            font-size: 1em;
            color: #e9edef;
            box-shadow: 0 1px 2px rgba(0,0,0,0.04);
            position: relative;
            word-break: break-word;
        }
        .wa-message.sent .wa-bubble {
            background: #005c4b;
            color: #fff;
        }
        .wa-timestamp {
            font-size: 0.78em;
            color: #8696a0;
            margin-top: 2px;
            margin-left: 4px;
        }
        .wa-message.sent .wa-timestamp {
            margin-right: 4px;
            margin-left: 0;
        }
        .wa-input-area {
            display: flex;
            align-items: center;
            padding: 10px 12px;
            background: #202c33;
            border-top: 1px solid #222e35;
            gap: 8px;
        }
        .wa-input-area input[type="text"] {
            flex: 1;
            padding: 10px 14px;
            border-radius: 22px;
            border: none;
            background: #2a3942;
            color: #e9edef;
            font-size: 1em;
            outline: none;
            box-shadow: 0 1px 2px rgba(0,0,0,0.03);
            transition: background 0.2s;
        }
        .wa-input-area input[type="text"]:focus {
            background: #202c33;
        }
        .wa-input-area button[type="submit"] {
            background: #25d366;
            border: none;
            border-radius: 50%;
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background 0.2s;
        }
        .wa-input-area button[type="submit"]:hover {
            background: #128c7e;
        }
        .wa-chat-box::-webkit-scrollbar {
            width: 6px;
            background: #111b21;
        }
        .wa-chat-box::-webkit-scrollbar-thumb {
            background: #222e35;
            border-radius: 3px;
        }
        @media (max-width: 500px) {
            .wa-main {
                width: 100vw;
                height: 100vh;
                border-radius: 0;
            }
        }
    </style>
</head>
<body>
    <div class="wa-container">
        <div class="wa-main" role="main">
            <div class="wa-header" id="waHeader">
                <img src="file:///Users/anujkrsharma/Downloads/Snapchat-323049664.jpg" alt="Profile picture" class="wa-profile-pic" id="waProfilePic">
                <div class="wa-profile-info">
                    <strong id="waProfileName">Anuj Sharma</strong>
                    <span id="waStatus">online</span>
                </div>
                <button class="wa-header__menu" aria-label="Open menu">
                    <img src="https://img.icons8.com/ios-filled/50/ffffff/menu-2.png" alt="Menu icon" width="26" height="26">
                </button>
            </div>
            <div class="wa-chat-switcher">
                <button id="waChatHuman" class="active">Anuj Sharma</button>
                <button id="waChatAI">AI Assistant</button>
            </div>
            <div class="wa-chat-box" id="waChatBox" aria-live="polite"></div>
            <form class="wa-input-area" id="waChatForm" autocomplete="off">
                <input type="text" id="waMessageInput" placeholder="Type a message" required aria-label="Type a message" />
                <button type="submit" aria-label="Send message">
                    <svg width="22" height="22" fill="none" viewBox="0 0 24 24" aria-hidden="true">
                        <path fill="#fff" d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                    </svg>
                </button>
            </form>
        </div>
    </div>
    <script>
        const waChatBox = document.getElementById('waChatBox');
        const waChatForm = document.getElementById('waChatForm');
        const waMessageInput = document.getElementById('waMessageInput');
        const waStatus = document.getElementById('waStatus');
        const waProfilePic = document.getElementById('waProfilePic');
        const waProfileName = document.getElementById('waProfileName');
        const waChatHumanBtn = document.getElementById('waChatHuman');
        const waChatAIBtn = document.getElementById('waChatAI');

        let waCurrentChat = 'human';
        const waChatHistory = { human: [], ai: [] };

        waChatHumanBtn.onclick = () => waSwitchChat('human');
        waChatAIBtn.onclick = () => waSwitchChat('ai');

        function waSwitchChat(type) {
            waCurrentChat = type;
            waChatHumanBtn.classList.toggle('active', type === 'human');
            waChatAIBtn.classList.toggle('active', type === 'ai');
            if (type === 'human') {
                waProfilePic.src = "file:///Users/anujkrsharma/Downloads/Snapchat-323049664.jpg";
                waProfilePic.alt = "Profile picture of Anuj Sharma";
                waProfileName.textContent = "Anuj Sharma";
                waStatus.textContent = "online";
            } else {
                waProfilePic.src = "https://img.icons8.com/color/96/000000/artificial-intelligence.png";
                waProfilePic.alt = "AI Assistant";
                waProfileName.textContent = "AI Assistant";
                waStatus.textContent = "online";
            }
            waRenderChat();
        }

        window.onload = () => waMessageInput.focus();

        waChatForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const msg = waMessageInput.value.trim();
            if (!msg) return;
            waAddMessage(waEscapeHTML(msg), 'sent');
            waMessageInput.value = '';
            waChatBox.scrollTop = waChatBox.scrollHeight;
            waAnnounceMessage(msg);

            if (waCurrentChat === 'human') {
                waStatus.textContent = 'typing...';
                setTimeout(() => {
                    waAddMessage('This is a demo reply!', 'received');
                    waChatBox.scrollTop = waChatBox.scrollHeight;
                    waAnnounceMessage('This is a demo reply!');
                    waStatus.textContent = 'online';
                }, 800);
            } else {
                waStatus.textContent = 'typing...';
                setTimeout(async () => {
                    const aiReply = await waGetAIReply(msg);
                    waAddMessage(aiReply, 'received');
                    waChatBox.scrollTop = waChatBox.scrollHeight;
                    waAnnounceMessage(aiReply);
                    waStatus.textContent = 'online';
                }, 1000);
            }
        });

        function waAddMessage(text, type) {
            const time = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            waChatHistory[waCurrentChat].push({text, type, time});
            waRenderChat();
        }

        function waRenderChat() {
            waChatBox.innerHTML = '';
            waChatHistory[waCurrentChat].forEach(msg => {
                const msgDiv = document.createElement('div');
                msgDiv.className = `wa-message ${msg.type}`;
                msgDiv.innerHTML = `<span class="wa-bubble">${msg.text}</span><span class="wa-timestamp">${msg.time}</span>`;
                waChatBox.appendChild(msgDiv);
            });
            waChatBox.scrollTop = waChatBox.scrollHeight;
        }

        function waEscapeHTML(str) {
            return str.replace(/[&<>"']/g, m => ({
                '&': '&amp;',
                '<': '&lt;',
                '>': '&gt;',
                '"': '&quot;',
                "'": '&#39;'
            })[m]);
        }

        function waAnnounceMessage(text) {
            waChatBox.setAttribute('aria-live', 'polite');
            setTimeout(() => waChatBox.setAttribute('aria-live', 'off'), 1000);
        }

        waMessageInput.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                waChatForm.dispatchEvent(new Event('submit', {cancelable: true, bubbles: true}));
            }
        });

        async function waGetAIReply(userMsg) {
            const lower = userMsg.toLowerCase();
            if (lower.includes('hello')) return "Hello! How can I assist you today?";
            if (lower.includes('weather')) return "I'm an AI assistant. I can't check real weather, but it's always sunny in the cloud!";
            return "I'm your AI assistant. Ask me anything!";
        }
    </script>
</body>
</html>
